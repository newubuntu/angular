<div ng-controller="ProfileController">
    <a href="#/family/" class="btn btn-default">Go back to the Family</a>
    <a href="#/family/{{person.id}}" class="btn btn-default pull-right">View Profile</a>
    <h2>Update</h2>

    <form name="form" mg-model class="form-horizontal css-form" novalidate>
        <div class="form-group">
            <label for="first_name" class="col-lg-2 control-label">First Name
                <span class="required">*</span>
            </label>
            <div class="col-lg-4">
                <input type="text" class="form-control" id="first_name" placeholder="First Name" ng-model="person.first_name" required/>
            </div>
        </div>
        <div class="form-group">
            <label for="last_name" class="col-lg-2 control-label">Last Name
                <span class="required">*</span>
            </label>
            <div class="col-lg-4">
                <input type="text" class="form-control" id="last_name" placeholder="Last Name" ng-model="person.last_name" required/>
            </div>
        </div>

        <div class="form-group">
            <label for="date_of_birth" class="col-lg-2 control-label">Date of Birth
                <span class="required">*</span>
            </label>
            <div class="col-lg-4">
                <input type="text" class="form-control" id="date_of_birth" placeholder="Date of Birth"
                       ng-model="person.date_of_birth"
                       datepicker
                       required
                       />
            </div>
        </div>

        <div class="form-group">
            <label for="biography" class="col-lg-2 control-label">Biography</label>
            <div class="col-lg-4">
                <textarea class="form-control" rows="5" placeholder="Biography" ng-model="person.biography"></textarea>
            </div>
        </div>

        <div class="form-group">
            <label for="avatar" class="col-lg-2 control-label">Avatar</label>
            <div class="col-lg-4">
                <div
                    file-upload
                    action='back-end/person/upload/{{person.id}}'
                    btn-class='btn btn-default'
                    btn-label="Choose Image"
                    input-name="image"
                    on-success='uploadComplete(responseText, notification)'
                    progress-class='btn btn-info'>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="preview" class="col-lg-2 control-label">Preview</label>
            <div class="col-lg-4">
                <div class="thumbnail" name="preview">
                    <img ng-src="{{profile_picture_url}}" />
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="col-lg-offset-2 col-lg-10">
                <button type="submit"
                        class="btn btn-primary"
                        ng-click="save(person)"
                        ng-disabled="form.$invalid"
                        >Update</button>
                <a href="#/family" class="btn btn-default">Cancel</a>
            </div>
        </div>
    </form>
</div>

<style type="text/css">
    form span.required
    {
        color: red;
    }

    .css-form input.ng-invalid.ng-dirty {
        background-color: #FED6D8;
    }
</style>